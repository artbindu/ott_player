class OTTMediaPlayer{constructor(e,t,i){this.config={fwdTime:10,rndTime:-10,isEnableFullScreen:!1,isEnablePipMode:!1,rotationCount:0,btnType:{playPause:"PLAY-PAUSE",volume:"VOLUME",volume:"VOLUME",seek:"SEEK",fullScreen:"FULL-SCREEN",pip:"PIP",rotation:"ROTATION"},isEnableAutoColorChange:!1},this.video=e,this.controls=t,this.video.volume=1,this.trimUIControls=i.trimFeature,this.trimConfig={trimStart:0,trimEnd:this.video.duration||0,defaultVal:5,isTrimActive:!1,isAutoLoopEnabled:!1},this.init(),this.lastUpdateTime=0,this.controls.seekBar&&(this.controls.seekBar.value=0)}init(){this.startPos=this.controls.startPos,this.endPos=this.controls.endPos,this.seekBar=this.controls.seekBar,this.resetPlayback=this.controls.resetPlayback,this.playbackRate=this.controls.playbackRate,this.backwordPlayback=this.controls.backwordPlayback,this.playPauseBtn=this.controls.playPauseBtn,this.forwardPlayback=this.controls.forwardPlayback,this.volumeBar=this.controls.volumeBar,this.volumeValue=this.controls.volumeValue,this.volumeBtn=this.controls.volumeBtn,this.fullScreenBtn=this.controls.fullScreenBtn,this.pipModeBtn=this.controls.pipModeBtn,this.rotationBtn=this.controls.rotationBtn,this.playbackMode=this.controls.videoMode,this.bindEvents(),this.updateUIControls(),this.bindKeyPressEvent(),this.bindTrimEvents(),this.updateTrimDisplays()}updateUIControls(){this.updateUIButton({type:this.config.btnType.playPause}),this.updateVolumeBar(),this.updateSeekBar()}switchFullScreenPipConfig=()=>{setTimeout(()=>{this.config.isEnableFullScreen=!!document.fullscreenElement,this.config.isEnablePipMode=!!document.pictureInPictureElement,this.updateUIButton({type:this.config.btnType.fullScreen})},100)};bindEvents(){this.playPauseBtn.addEventListener("click",()=>this.togglePlayPause()),this.playbackRate.addEventListener("change",()=>this.setPlaybackSpeed()),this.playbackMode.addEventListener("change",()=>this.setVideoMode()),this.resetPlayback.addEventListener("click",()=>this.toggleResetPlayer()),this.forwardPlayback.addEventListener("click",()=>this.toggleForwardPlayback(this.config.fwdTime)),this.backwordPlayback.addEventListener("click",()=>this.toggleForwardPlayback(this.config.rndTime)),this.volumeBar.addEventListener("input",()=>this.setVolume()),this.volumeBtn.addEventListener("click",()=>this.toggleMute()),this.seekBar.addEventListener("input",()=>this.seekVideo()),this.rotationBtn.addEventListener("click",()=>this.toggleScreenRotation()),this.video.addEventListener("volumechange",()=>this.updateVolumeBar()),this.video.addEventListener("timeupdate",()=>this.updateSeekBar()),this.video.addEventListener("ended",()=>this.onVideoEnded()),this.pipModeBtn.addEventListener("click",()=>this.togglePipMode(!this.config.isEnablePipMode)),this.video.addEventListener("leavepictureinpicture",()=>{this.config.isEnablePipMode&&!document.pictureInPictureElement&&this.switchFullScreenPipConfig()}),this.fullScreenBtn.addEventListener("click",()=>this.toggleFullScreen(!this.config.isEnableFullScreen)),document.addEventListener("fullscreenchange",()=>{document.fullscreenElement||(this.toggleFullScreen(!this.config.isEnableFullScreen),!this.config.isEnablePipMode&&document.pictureInPictureElement&&this.switchFullScreenPipConfig())})}bindKeyPressEvent(){document.addEventListener("keydown",e=>{switch(e.code){case"Space":case"Enter":this.togglePlayPause();break;case"KeyA":case"ArrowLeft":this.toggleForwardPlayback(this.config.rndTime);break;case"KeyD":case"ArrowRight":this.toggleForwardPlayback(this.config.fwdTime);break;case"KeyF":document.fullscreenElement&&document.exitFullscreen(),this.toggleFullScreen(!this.config.isEnableFullScreen);break;case"KeyP":document.pictureInPictureElement&&document.exitPictureInPicture(),this.togglePipMode(!this.config.isEnablePipMode);break;case"Equal":case"Plus":this.volumeBar.value=this.video.volume<1?(Number(this.volumeBar.value||0)+.01).toFixed(2):this.volumeBar.value,this.setVolume();break;case"Minus":case"Hypen":this.volumeBar.value=0<this.video.volume?((Number(this.volumeBar.value||1)-.01)%1).toFixed(2):this.volumeBar.value,this.setVolume();break;case"KeyM":this.toggleMute();break;case"Digit0":case"Digit1":case"Digit2":case"Digit3":case"Digit4":case"Digit5":case"Digit6":case"Digit7":case"Digit8":case"Digit9":this.volumeBar.value=e.key/10,this.setVolume();break;case"KeyT":this.setTrimStart();break;case"KeyC":this.setTrimEnd();break;case"KeyG":this.playTrimmedSegment();break;case"KeyR":this.resetTrimRange();break;case"KeyO":document.fullscreenElement&&!this.config.rotationCount?console.warn("Screen Rotation will not work"):this.toggleScreenRotation();break;case"ArrowUp":this.cycleVideoMode(-1);break;case"ArrowDown":this.cycleVideoMode(1);break;default:console.warn("invalid key press Event: ",e.code)}})}bindTrimEvents(){this.trimUIControls.trimStartBtn.addEventListener("click",()=>this.setTrimStart()),this.trimUIControls.trimEndBtn.addEventListener("click",()=>this.setTrimEnd()),this.trimUIControls.playTrimmedBtn.addEventListener("click",()=>this.playTrimmedSegment()),this.trimUIControls.playTrimmedBtn.addEventListener("dblclick",()=>this.resetTrimRange()),this.trimUIControls.trimStartInput.addEventListener("input",()=>this.updateTrimFromInput("start")),this.trimUIControls.trimEndInput.addEventListener("input",()=>this.updateTrimFromInput("end")),this.trimUIControls.isRepeateChkBox.addEventListener("change",()=>this.toggleAutoLoop()),this.trimUIControls.repeateTrimBtn.addEventListener("click",()=>this.toggleRepeteTrim())}toggleFullScreen(e){e&&this.video.requestFullscreen(),this.switchFullScreenPipConfig()}togglePipMode(e){e&&!document.pictureInPictureElement?this.video.requestPictureInPicture():document.pictureInPictureElement&&document.exitPictureInPicture(),this.switchFullScreenPipConfig()}toggleMute(){this.video.muted=!this.video.muted,this.updateVolumeBar()}togglePlayPause(e=!0){e&&(this.trimConfig.isTrimActive=!1),this.video.paused?this.video.play():this.video.pause(),this.updateUIButton({type:this.config.btnType.playPause})}setPlaybackSpeed(){this.video.playbackRate=parseFloat(this.playbackRate.value)}toggleResetPlayer(){this.video.currentTime=0,this.video.play(),this.updateUIButton({type:this.config.btnType.playPause})}toggleForwardPlayback(e=0){this.video.currentTime+=e}setVolume(){this.video.volume=parseFloat(this.volumeBar.value),this.video.muted=!1,this.updateVolumeBar()}seekVideo(){this.video.currentTime=Math.floor(this.video.duration*parseInt(this.seekBar.value)/100),this.trimConfig.isTrimActive&&!this.isBtwnTrimRange()&&(this.trimConfig.isTrimActive=!1,this.updateTrimDisplays()),this.updateSeekBar()}updateSeekBar(){var e=Date.now(),t=1e3<=e-this.lastUpdateTime||this.video.seeking;this.trimConfig.isTrimActive&&!this.isBtwnTrimRange()?(this.video.currentTime=this.trimConfig.trimStart,this.trimConfig.isAutoLoopEnabled?(this.video.play(),this.updateUIButton({type:this.config.btnType.playPause})):this.togglePlayPause(!1)):t&&(this.seekBar.value=Math.floor(100*this.video.currentTime/this.video.duration),this.startPos.textContent=this.formatTime(this.video.currentTime),this.endPos.textContent=this.formatTime(this.video.duration),this.video.currentTime<=1&&this.updateUIButton({type:this.config.btnType.playPause}),this.lastUpdateTime=e),t&&this.config.isEnableAutoColorChange&&parseInt(this.video.currentTime)%1==0&&this.updateAutoColorChange()}setTrimStart(){this.trimConfig.trimStart=this.video.currentTime,this.trimConfig.trimStart>=this.trimConfig.trimEnd&&(this.trimConfig.trimEnd=Math.max(this.video.duration||0,this.trimConfig.trimStart+this.trimConfig.defaultVal)),this.trimConfig.isTrimActive=!0,this.updateTrimDisplays()}setTrimEnd(){this.trimConfig.trimEnd=this.video.currentTime,this.trimConfig.trimEnd<=this.trimConfig.trimStart&&(this.trimConfig.trimStart=Math.max(0,this.trimConfig.trimStart-this.trimConfig.defaultVal)),this.trimConfig.isTrimActive=!0,this.updateTrimDisplays()}resetTrimRange(){this.trimConfig.trimStart=0,this.trimConfig.trimEnd=this.video.duration||0,this.trimConfig.isTrimActive=!1,this.trimUIControls.playTrimmedBtn.disabled=!0,this.updateTrimDisplays()}toggleAutoLoop(){this.trimConfig.isAutoLoopEnabled=this.trimUIControls.isRepeateChkBox.checked}toggleRepeteTrim(){this.trimConfig.isAutoLoopEnabled=!this.trimConfig.isAutoLoopEnabled,this.trimUIControls.isRepeateChkBox.checked=this.trimConfig.isAutoLoopEnabled}isValidRange(){return 0<=this.trimConfig.trimStart&&0<this.trimConfig.trimEnd&&this.trimConfig.trimStart!==this.trimConfig.trimEnd}isBtwnTrimRange(){return this.isValidRange()&&this.trimConfig.isTrimActive&&this.trimConfig.trimStart<=this.video.currentTime&&this.video.currentTime<=this.trimConfig.trimEnd}updateTrimDisplays(){this.trimUIControls.trimStartInput.value=this.formatTime(this.trimConfig.trimStart),this.trimUIControls.trimEndInput.value=this.formatTime(this.trimConfig.trimEnd),this.trimConfig.isTrimActive&&this.isBtwnTrimRange()&&(this.trimUIControls.playTrimmedBtn.disabled=!1),this.trimUIControls.repeateTrimBtn.disabled=!this.trimConfig.isTrimActive,this.trimUIControls.playTrimmedBtn.innerHTML=this.trimConfig.isTrimActive?`<i class="fa ${this.video.paused?"fa-play":"fa-pause"}"></i> <i class="fa fa-cut"></i> Trim`:this.trimUIControls.playTrimmedBtn.disabled?'<i class="fa fa-cut"></i> <i class="fas fa-video"></i> Trim':'<i class="fa fa-bookmark"></i> <i class="fa fa-cut"></i> Trim'}updateTrimFromInput(e){var t="start"===e?this.trimUIControls.trimStartInput:this.trimUIControls.trimEndInput,i=t.value.trim(),i=this.parseTime(i);null!==i?("start"===e?this.trimConfig.trimStart=i:this.trimConfig.trimEnd=i,this.trimConfig.isTrimActive=!0,this.trimConfig.trimStart>=this.trimConfig.trimEnd&&("start"===e?this.trimConfig.trimEnd=Math.min(this.video.duration||0,this.trimConfig.trimStart+this.trimConfig.defaultVal):this.trimConfig.trimStart=Math.max(0,this.trimConfig.trimEnd-1),this.updateTrimDisplays())):t.value=this.formatTime("start"===e?this.trimConfig.trimStart:this.trimConfig.trimEnd)}parseTime(e){e=e.split(":").map(e=>parseInt(e,10));return 3===e.length&&e.every(e=>!isNaN(e))?3600*e[0]+60*e[1]+e[2]:2===e.length&&e.every(e=>!isNaN(e))?60*e[0]+e[1]:1!==e.length||isNaN(e[0])?null:e[0]}playTrimmedSegment(){this.trimConfig.isTrimActive?this.trimConfig.trimStart>=this.trimConfig.trimEnd?alert("Invalid trim range. Start time must be before end time."):((this.video.currentTime<this.trimConfig.trimStart||this.video.currentTime>=this.trimConfig.trimEnd)&&(this.video.currentTime=this.trimConfig.trimStart,this.updateTrimDisplays()),this.ffmpegScript(),this.togglePlayPause(!1)):(this.video.currentTime>this.trimConfig.trimEnd+1||this.video.currentTime<this.trimConfig.trimStart-1)&&(this.trimConfig.isTrimActive=!0,this.video.pause(),this.playTrimmedSegment())}updateVolumeBar(){this.volumeBar.value=this.video.volume,this.volumeValue.textContent=`${this.video.muted?"00":(99*this.video.volume).toFixed(0)}%`,this.updateUIButton({type:this.config.btnType.volume})}setVideoMode(){this.config.isEnableAutoColorChange=!1,this.video.style.filter=this.getVideoMode()}updateAutoColorChange(){this.video.style.filter=this.video.style.filter.replace(/(?<=(hue-rotate\())\d+(?=deg\))/gi,e=>parseInt(360*Math.random(0,1)))}getVideoMode(){switch(this.playbackMode.value){case"normal":return"";case"cinema":return"contrast(120%) brightness(90%)";case"vivid":return"contrast(140%) brightness(110%) saturate(120%)";case"bw":return"grayscale(100%)";case"night":return"brightness(60%) contrast(110%)";case"glow":return"sepia(80%) saturate(120%) brightness(110%)";case"heat":return"contrast(130%) saturate(140%) hue-rotate(15deg)";case"sepia":return"sepia(100%)";case"invert":return"invert(100%)";case"blur":return"blur(2px)";case"autocolorchange":return this.config.isEnableAutoColorChange=!0,`hue-rotate(${parseInt(360*Math.random(0,1))}deg) contrast(120%) brightness(90%)`;default:return""}}cycleVideoMode(e){var t=this.playbackMode,e=(t.selectedIndex+e+t.options.length)%t.options.length;t.selectedIndex=e,t.dispatchEvent(new Event("change"))}updateUIButton(e={type:""}){switch(e.type){case this.config.btnType.playPause:this.playPauseBtn.innerHTML=`<i class="fa ${this.video.paused?"fa-play":"fa-pause"}"></i>`,this.trimUIControls.playTrimmedBtn.innerHTML=this.trimConfig.isTrimActive?`<i class="fa ${this.video.paused?"fa-play":"fa-pause"}"></i> <i class="fa fa-cut"></i> Trim`:this.trimUIControls.playTrimmedBtn.disabled?'<i class="fa fa-cut"></i> <i class="fas fa-video"></i> Trim':'<i class="fa fa-bookmark"></i> <i class="fa fa-cut"></i> Trim';break;case this.config.btnType.volume:this.volumeBtn.innerHTML=`<i class="fa fa-volume-${this.video.muted?"mute":"up"}"></i>`;break;case this.config.btnType.fullScreen:case this.config.btnType.pip:this.fullScreenBtn.innerHTML=`<i class="fa fa-${this.config.isEnableFullScreen?"compress":"expand"}"></i>`,this.pipModeBtn.innerHTML=`<i class="${this.config.isEnablePipMode?"fas fa-external-link-alt":"fa fa-window-restore"}"></i>`;break;case this.config.btnType.rotation:this.rotationBtn.innerHTML=`<i class="fa fa-undo" style="transform: rotate(${-90*this.config.rotationCount}deg);"></i>`}}toggleScreenRotation(){this.config.rotationCount=(this.config.rotationCount+1)%4,this.video.style.transform=`rotate(${-90*this.config.rotationCount}deg)`,this.updateUIButton({type:this.config.btnType.rotation})}onVideoEnded(){var e=document.getElementById("mediaDropdown");e&&e.selectedIndex<e.options.length&&playNextMedia()}formatTime(e){return isNaN(e)?"--:--:--":[Math.floor(e/3600),Math.floor(e%3600/60),Math.floor(e%60)].map(e=>e.toString().padStart(2,"0")).join(":")}static makeControlsDraggable(e,t){let i=document.getElementById(e);e=document.getElementById(t);let r=!1,n,o,s,a;e.addEventListener("mousedown",function(e){r=!0,n=e.clientX,o=e.clientY;e=i.getBoundingClientRect();s=e.left,a=e.top,i.style.transition="none",i.style.position="fixed",i.style.zIndex=1e3}),document.addEventListener("mousemove",function(e){var t;r&&(t=e.clientX-n,e=e.clientY-o,i.style.left=s+t+"px",i.style.top=a+e+"px")}),document.addEventListener("mouseup",function(){r=!1})}static playFromHeaderUrl(e,t){e=document.getElementById(e).value.trim();e&&((t=document.getElementById(t)).pause(),t.src=e,t.load(),t.play())}ffmpegScript(){var e={width:this.video.videoWidth,height:this.video.videoHeight};const t={width:3840,height:2160},i={width:1920,height:1080},r={width:1080,height:720};var n=Math.max(e.width,e.height)>=Math.max(t.width,t.height);let o={INPUTFILE:this.video.name,STARTTIME:this.trimConfig.trimStart.toFixed(1),TRIMDURATION:(this.trimConfig.trimEnd-this.trimConfig.trimStart).toFixed(1),OUTPUTFILE:"trim/"+this.trimConfig.trimStart.toFixed(2),VIDEO_WIDTH:e.width,VIDEO_HEIGHT:e.height,CORP_HEIGHT:n?Math.max(i.width,i.height):Math.max(e.height,r.height),CORP_WIDTH:n?Math.min(i.width,i.height):Math.min(e.width,r.height)},s={break:"------ Basic Video Information & Transformation --------",videoResolution:e.width+` x ${e.height} `+(n?"âœ…":"ðŸš«"),storeMediaInfo:'ffprobe -v quiet -print_format json -show_format -show_streams "{INPUTFILE}" > "trim/mediaInfo.json"',reEncode_video_and_Audio:`ffmpeg -i "{INPUTFILE}" -c:v libx264 -crf 23 -preset medium -c:a aac -b:a 192k "${o.INPUTFILE.replace(/\.[\w\d]+$/gi,"")}.mp4"`,break0:"--------Full Video Audio-------------",trimeVideo_sec:'ffmpeg -i "{INPUTFILE}" -ss {STARTTIME} -t {TRIMDURATION} -c:v libx264 -crf 23 -preset fast -c:a aac -b:a 128k "{OUTPUTFILE}_{SCRIPTKEY}.mp4"',trimVideoWithoutAudio_sec:'ffmpeg -i "{INPUTFILE}" -ss {STARTTIME} -t {TRIMDURATION} -c:v libx264 -crf 23 -preset fast -an "{OUTPUTFILE}_{SCRIPTKEY}.mp4"',break1:"\n--------Video Crop Center | Left | Right-------------",cropVideo_left:'ffmpeg -i "{INPUTFILE}" -ss {STARTTIME} -t {TRIMDURATION} -vf "crop={CORP_WIDTH}:{CORP_HEIGHT}:(({VIDEO_WIDTH}-{CORP_WIDTH}*3)/2 + {CORP_WIDTH}*0):({VIDEO_HEIGHT}-1920)/2" -c:v libx264 -crf 23 -preset fast -c:a aac -b:a 128k "{OUTPUTFILE}_{SCRIPTKEY}.mp4"',cropVideo_center:'ffmpeg -i "{INPUTFILE}" -ss {STARTTIME} -t {TRIMDURATION} -vf "crop={CORP_WIDTH}:{CORP_HEIGHT}:(({VIDEO_WIDTH}-{CORP_WIDTH}*3)/2 + {CORP_WIDTH}*1):({VIDEO_HEIGHT}-1920)/2" -c:v libx264 -crf 23 -preset fast -c:a aac -b:a 128k "{OUTPUTFILE}_{SCRIPTKEY}.mp4"',cropVideo_right:'ffmpeg -i "{INPUTFILE}" -ss {STARTTIME} -t {TRIMDURATION} -vf "crop={CORP_WIDTH}:{CORP_HEIGHT}:(({VIDEO_WIDTH}-{CORP_WIDTH}*3)/2 + {CORP_WIDTH}*2):({VIDEO_HEIGHT}-1920)/2" -c:v libx264 -crf 23 -preset fast -c:a aac -b:a 128k "{OUTPUTFILE}_{SCRIPTKEY}.mp4"',break2:"\n--------Reverse Corped Video Center | Left | Right-------------",cropVideo_left_reverse:'ffmpeg -i "{OUTPUTFILE}_{SCRIPTKEY-REV}.mp4" -vf reverse -af areverse -preset fast -c:v libx264 -c:a aac -b:a 128k "{OUTPUTFILE}_{SCRIPTKEY}.mp4"',cropVideo_center_reverse:'ffmpeg -i "{OUTPUTFILE}_{SCRIPTKEY-REV}.mp4" -vf reverse -af areverse -preset fast -c:v libx264 -c:a aac -b:a 128k "{OUTPUTFILE}_{SCRIPTKEY}.mp4"',cropVideo_right_reverse:'ffmpeg -i "{OUTPUTFILE}_{SCRIPTKEY-REV}.mp4" -vf reverse -af areverse -preset fast -c:v libx264 -c:a aac -b:a 128k "{OUTPUTFILE}_{SCRIPTKEY}.mp4"',break3:"\n--------Video Crop Extrime Left/Right | Middle of Left-Center/Right-Center-------------",cropVideo_extrime_left:'ffmpeg -i "{INPUTFILE}" -ss {STARTTIME} -t {TRIMDURATION} -vf "crop={CORP_WIDTH}:{CORP_HEIGHT}:0:({VIDEO_HEIGHT}-1920)/2" -c:v libx264 -crf 23 -preset fast -c:a aac -b:a 128k "{OUTPUTFILE}_{SCRIPTKEY}.mp4"',cropVideo_left_center_mid:'ffmpeg -i "{INPUTFILE}" -ss {STARTTIME} -t {TRIMDURATION} -vf "crop={CORP_WIDTH}:{CORP_HEIGHT}:(({VIDEO_WIDTH}-{CORP_WIDTH}*3)/2 + ({CORP_WIDTH}*(0+1)/2)):({VIDEO_HEIGHT}-1920)/2" -c:v libx264 -crf 23 -preset fast -c:a aac -b:a 128k "{OUTPUTFILE}_{SCRIPTKEY}.mp4"',cropVideo_center_right_mid:'ffmpeg -i "{INPUTFILE}" -ss {STARTTIME} -t {TRIMDURATION} -vf "crop={CORP_WIDTH}:{CORP_HEIGHT}:(({VIDEO_WIDTH}-{CORP_WIDTH}*3)/2 + ({CORP_WIDTH}*(1+2)/2)):({VIDEO_HEIGHT}-1920)/2" -c:v libx264 -crf 23 -preset fast -c:a aac -b:a 128k "{OUTPUTFILE}_{SCRIPTKEY}.mp4"',cropVideo_extrime_right:'ffmpeg -i "{INPUTFILE}" -ss {STARTTIME} -t {TRIMDURATION} -vf "crop={CORP_WIDTH}:{CORP_HEIGHT}:({VIDEO_WIDTH}-{CORP_WIDTH}):({VIDEO_HEIGHT}-1920)/2" -c:v libx264 -crf 23 -preset fast -c:a aac -b:a 128k "{OUTPUTFILE}_{SCRIPTKEY}.mp4"',break4:"\n--------Reverse Corped Video Extrime Left/Right | Middle of Left-Center/Right-Center-------------",cropVideo_extrime_left_reverse:'ffmpeg -i "{OUTPUTFILE}_{SCRIPTKEY-REV}.mp4" -vf reverse -af areverse -preset fast -c:v libx264 -c:a aac -b:a 128k "{OUTPUTFILE}_{SCRIPTKEY}.mp4"',cropVideo_left_center_mid_reverse:'ffmpeg -i "{OUTPUTFILE}_{SCRIPTKEY-REV}.mp4" -vf reverse -af areverse -preset fast -c:v libx264 -c:a aac -b:a 128k "{OUTPUTFILE}_{SCRIPTKEY}.mp4"',cropVideo_center_right_mid_reverse:'ffmpeg -i "{OUTPUTFILE}_{SCRIPTKEY-REV}.mp4" -vf reverse -af areverse -preset fast -c:v libx264 -c:a aac -b:a 128k "{OUTPUTFILE}_{SCRIPTKEY}.mp4"',cropVideo_extrime_right_reverse:'ffmpeg -i "{OUTPUTFILE}_{SCRIPTKEY-REV}.mp4" -vf reverse -af areverse -preset fast -c:v libx264 -c:a aac -b:a 128k "{OUTPUTFILE}_{SCRIPTKEY}.mp4"',break5:"--------Merge Clips-------------",mergedCropVideo:"ffmpeg -f concat -safe 0 -i mergevideolist.txt -c copy {SCRIPTKEY}.mp4",mergedCropVideo_no_Audio:'ffmpeg -i "mergedCropVideo.mp4" -an {SCRIPTKEY}.mp4',trimAudioFromVideo:'ffmpeg -i "{INPUTFILE}" -ss {STARTTIME} -t {TRIMDURATION} -c copy "{SCRIPTKEY}.mp3"',mergedCropAudios:"ffmpeg -f concat -safe 0 -i mergevideolist.txt -c copy {SCRIPTKEY}.mp3",mergedAudio_And_Video:"ffmpeg -i mergedCropVideo_no_Audio.mp4 -i trimAudioFromVideo.mp3 -c:v copy -c:a aac -shortest {SCRIPTKEY}.mp4",mergedAudio_And_Video_90deg:'ffmpeg -i "mergedAudio_And_Video.mp4" -vf "transpose=1" "{SCRIPTKEY}.mp4"',mergedAudio_And_Video_270deg:'ffmpeg -i "mergedAudio_And_Video.mp4" -vf "transpose=1,transpose=1,transpose=1" "{SCRIPTKEY}.mp4"'};console.clear(),Object.keys(s).forEach(e=>console.log(s[e].replace(/\{SCRIPTKEY\}/gi,e).replace(/\{SCRIPTKEY-REV\}/gi,e.replace("_reverse","")).replace(/\{\w+\}/gi,e=>o[e.replace(/[\}\{]/gi,"")])))}}function toggleInputModeDropdown(){var e=document.getElementById("inputModeDropdown").value;document.getElementById("fileInputRow").style.display="file"===e?"":"none",document.getElementById("urlInputRow").style.display="url"===e?"":"none",document.getElementById("directoryInputRow").style.display="directory"===e?"":"none",document.getElementById("navButtonsRow").style.display="none"}function chooseLocalFile(){var e,t=document.getElementById("fName"),i=document.getElementById("media-video-player");t.files&&t.files[0]&&(e=URL.createObjectURL(t.files[0]),i.pause(),i.src=e,i.name=t.files[0].name,i.load(),i.play())}function loadDirectoryFiles(){var e=document.getElementById("directoryInput");let i=document.getElementById("mediaDropdown");var t=document.getElementById("directoryName"),r=(i.innerHTML="",document.createElement("option"));r.textContent="Select a media file...",r.value="",i.appendChild(r),e.files&&0<e.files.length?(r=e.files[0].webkitRelativePath.split("/")[0],t.textContent=`${r}(${e.files.length})`,Array.from(e.files).filter(e=>e.type.startsWith("video/")||e.type.startsWith("audio/")).forEach(e=>{var t=document.createElement("option");t.value=URL.createObjectURL(e),t.textContent=e.name,t.dataset.file=e,i.appendChild(t)}),i.hidden=!1,document.getElementById("navButtonsRow").style.display=""):(t.textContent="No Directory",i.hidden=!0,document.getElementById("navButtonsRow").style.display="none")}function playSelectedMedia(){var e,t=document.getElementById("mediaDropdown"),i=t.value;i&&((e=document.getElementById("media-video-player")).pause(),e.src=i,e.name=t.options[t.selectedIndex].textContent,e.load(),e.play())}function playPreviousMedia(){var e=document.getElementById("mediaDropdown");1<e.selectedIndex?(e.selectedIndex--,playSelectedMedia()):1===e.selectedIndex&&(e.selectedIndex=e.options.length-1,playSelectedMedia())}function playNextMedia(){var e=document.getElementById("mediaDropdown");e.selectedIndex<e.options.length-1?(e.selectedIndex++,playSelectedMedia()):e.selectedIndex===e.options.length-1&&(e.selectedIndex=1,playSelectedMedia())}function enableMobileDraggableControls(){let i=document.getElementById("media-media-controls");var e=document.getElementById("dragHandle");let r=!1,n,o,s,a;function d(e,t){i.style.left=e+"px",i.style.top=t+"px",i.style.position="fixed",i.style.zIndex=1e3,i.style.transition="none",i.focus()}e.addEventListener("mousedown",function(e){r=!0,n=e.clientX,o=e.clientY;e=i.getBoundingClientRect();s=e.left,a=e.top,d(s,a),i.setAttribute("tabindex","-1"),i.focus()}),document.addEventListener("mousemove",function(e){var t;r&&(t=e.clientX-n,e=e.clientY-o,d(s+t,a+e))}),document.addEventListener("mouseup",function(){r=!1}),e.addEventListener("touchstart",function(e){r=!0;e=e.touches[0],n=e.clientX,o=e.clientY,e=i.getBoundingClientRect();s=e.left,a=e.top,d(s,a),i.setAttribute("tabindex","-1"),i.focus()}),document.addEventListener("touchmove",function(e){var t;r&&(t=(e=e.touches[0]).clientX-n,e=e.clientY-o,d(s+t,a+e))}),document.addEventListener("touchend",function(){r=!1})}window.toggleInputModeDropdown=toggleInputModeDropdown,window.chooseLocalFile=chooseLocalFile,window.loadDirectoryFiles=loadDirectoryFiles,window.playSelectedMedia=playSelectedMedia,window.playPreviousMedia=playPreviousMedia,window.playNextMedia=playNextMedia,document.addEventListener("DOMContentLoaded",function(){var e={startPos:document.getElementById("startPos"),seekBar:document.getElementById("player-seekbar"),endPos:document.getElementById("endPos"),resetPlayback:document.getElementById("reset"),playbackRate:document.getElementById("playbackRate"),backwordPlayback:document.getElementById("backword"),playPauseBtn:document.getElementById("playPause"),forwardPlayback:document.getElementById("forward"),fullScreenBtn:document.getElementById("fullScreen"),pipModeBtn:document.getElementById("pipMode"),rotationBtn:document.getElementById("screenRotation"),volumeBar:document.getElementById("volumeBar"),volumeValue:document.getElementById("volumeValue"),volumeBtn:document.getElementById("volume"),videoMode:document.getElementById("videoMode")},t={trimStartBtn:document.getElementById("setTrimStart"),trimEndBtn:document.getElementById("setTrimEnd"),playTrimmedBtn:document.getElementById("playTrimmed"),trimStartInput:document.getElementById("trimStartInput"),trimEndInput:document.getElementById("trimEndInput"),isRepeateChkBox:document.getElementById("enableAutoLoop"),repeateTrimBtn:document.getElementById("repeatTrim")};new OTTMediaPlayer(document.getElementById("media-video-player"),e,{trimFeature:t});OTTMediaPlayer.makeControlsDraggable("media-media-controls","dragHandle"),window.playFromHeaderUrl=function(){OTTMediaPlayer.playFromHeaderUrl("headerVideoUrlInput","media-video-player")},enableMobileDraggableControls()});